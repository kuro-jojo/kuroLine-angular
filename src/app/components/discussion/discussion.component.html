<div class="content">
    <div class="contact-info">
        <div class="profile">
            <img class="avatar"
                src="https://static.vecteezy.com/system/resources/previews/005/005/788/non_2x/user-icon-in-trendy-flat-style-isolated-on-grey-background-user-symbol-for-your-web-site-design-logo-app-ui-illustration-eps10-free-vector.jpg"
                alt="avatar">
            <div class="data">
                <span class="name">Contact name</span>
                <div class="status">
                    <span class="bg-success ball"></span>
                    <span class="text">Online</span>
                </div>
            </div>
        </div>
        <div class="call"></div>
    </div>
    <div class="discussion">
        <p-scrollPanel [style]="{ width: '100%', height: '95%' }">
            @for (msg of discussion?.messages; track msg.id;let index = $index) {

            <div class="message-box"
                [ngClass]="{'sender': msg.senderId === currentUser?.id, 'new': isSameSender(index, msg)}">
                <div class="avatar">
                    <img *ngIf="isSameSender(index, msg)" class="avatar"
                        [src]="msg.senderId === currentUser?.id ? currentUser?.profilePicture : currentReceiver?.profilePicture"
                        alt="avatar">
                </div>
                <div class="box-content">
                    <div class="message">
                        <div class="message-content">
                            <span class="text">{{ msg.content }}</span>
                        </div>
                        <div class="message-time">
                            <span class="time">{{ msg.sentAt | date: 'H:mm:ss' }}</span>
                        </div>
                    </div>
                </div>
            </div>
            }
        </p-scrollPanel>
    </div>
    <div class="send-message">
        <p-iconField iconPosition="right" class="w-75 mx-auto">
            <p-inputIcon styleClass="pi pi-send" class="send-icon" (click)="sendMessage()" />
            <input type="text" pInputText placeholder="Type a message" class="w-100" [(ngModel)]="messageContent"
                (keydown.enter)="onKeyDown()" autofocus />
        </p-iconField>
    </div>
</div>